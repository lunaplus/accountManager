#!/usr/bin/env /Users/sanae/.rvm/rubies/ruby-1.9.3-p545/bin/ruby
# encoding: utf-8
ENV['GEM_HOME'] = '/Users/sanae/.rvm/gems/ruby-1.9.3-p545@cgi'

require 'mysql2'
require 'erb'

def htmlHeader
 ret =  "<head>"
 ret += "<meta charset-='UTF-8'>"
 ret += "</head><body>"
 return ret
end

def initCgi
 ret =  "Content-Type: text/html\n\n"
 ret += "<!DOCTYPE html>"
 ret += "<html>"
 ret += htmlHeader
 return ret
end

def htmlFooter
 ret = "</body></html>"
 return ret
end

def parseURL url
  parseList = url.split("/")
  return parseList
end

# == main ========================================
print initCgi

print "<center>Hello!!<br>"
print "path   = #{ENV['PATH_INFO']}<br>"
urlList = parseURL(ENV['PATH_INFO'])
print "parse  = #{urlList}<br>"
print "method = #{ENV['REQUEST_METHOD']}<br>"
print "ほげほげ"
print "</center>"
print <<-HTML
 <center>Hello!!<br>
   path   = #{pathinfo}<br>
   pathelem = #{pathelem2}<br>
   method = #{ENV['REQUEST_METHOD']}<br>
   digest = #{dig}<br>
   hoge   = #{hoge}<br>
 </center><br><br>

 <p>
 <form action="/cgi/index.cgi/login" method="post" accept-charset="UTF-8"
       autocomplete="off" name="login">
   <input type="text" name="loginid" size="10" maxlength="8" required><br>
   <input type="password" name="pass" size="10" autocomplete="off" required>
   <br>
   <input type="submit">
 </form>
 </p>
HTML

print htmlFooter
